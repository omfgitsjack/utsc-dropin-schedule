!function(){"use strict";angular.module("app.main",["app.routes","app.core"])}(),function(){"use strict";angular.module("app.core",["utilities.api","utilities.exception","utilities.logger","utilities.router"])}(),function(){"use strict";angular.module("app.routes",["app.schedule.routes","utilities.router"])}(),function(){"use strict";angular.module("utilities.api",[])}(),function(){"use strict";angular.module("utilities.exception",["utilities.logger"])}(),function(){"use strict";angular.module("utilities.logger",[])}(),function(){"use strict";angular.module("utilities.router",["ui.router"])}(),function(){"use strict";angular.module("app.data.schedule",["app.core"])}(),function(){"use strict";angular.module("app.schedule.routes",["ui.router","app.activities.widgets"])}(),function(){"use strict";angular.module("app.activities.widgets",["app.data.schedule"])}(),function(){"use strict";angular.module("app.places.activitysessions",[])}(),function(){"use strict";function t(t){t.options.timeOut=4e3,t.options.positionClass="toast-bottom-right"}function e(t){t.debugEnabled&&t.debugEnabled(!0)}function i(t){t.configure("[NG-JP Error] ")}function n(){}angular.module("app.core").config(t).config(e).config(i).run(n),t.$inject=["toastr"],e.$inject=["$logProvider"],i.$inject=["exceptionHandlerProvider"],n.$inject=["routerService"]}(),function(){"use strict";function t(t,e){e.parent="",t.state(e)}angular.module("app.routes").config(t),t.$inject=["$stateProvider","SCHEDULE_ROOT_ROUTE"]}(),function(){"use strict";function t(t,e){function i(t){return t.load()}var n=e.name;t.state({name:"activities",parent:n,url:"/",templateUrl:"app/components/schedule/widgets/activities/activities.tmpl.html",controller:"ActivityCtrl",controllerAs:"vm",resolve:{dataService:i}}),i.$inject=["activitiesDataService"]}angular.module("app.schedule.routes").config(t),t.$inject=["$stateProvider","SCHEDULE_ROOT_ROUTE"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr)}(),function(){"use strict";angular.module("utilities.api").constant("API_CONFIG",{BASE_ROUTE:"api"})}(),function(){"use strict";angular.module("utilities.api").constant("API_ROUTES_CONFIG",{DROPINS:"dropins"})}(),function(){"use strict";angular.module("app.schedule.routes").constant("SCHEDULE_ROOT_ROUTE",{"abstract":!0,name:"schedule",url:"/schedule",template:"<div ui-view></div>"})}(),function(){"use strict"}(),function(){"use strict";function t(t){function e(){i.activities=t.dropinActivities}var i=this;e()}function e(t){return t.getDropins()}angular.module("app.activities.widgets").controller("ActivityCtrl",t),t.$inject=["dataService"],t.resolve={activities:e},e.$inject=["scheduleService"]}(),function(){"use strict";function t(t){function e(){t.activitySessions=activitySessions}e()}angular.module("app.places.activitysessions").controller("ActivitySessionCtrl",t),t.$inject=["$scope","activitySessions"]}(),function(){"use strict";function t(t,e){function i(i,n){n||(n={}),t.post(e.BASE_ROUTE+"/"+i,n)}function n(i){return t.get(e.BASE_ROUTE+"/"+i).then(function(t){return t.data})}return{get:n,post:i}}angular.module("utilities.api").factory("apiService",t),t.$inject=["$http","API_CONFIG"]}(),function(){"use strict";function t(t){function e(e){return function(i){t.error(e,i)}}var i={catcher:e};return i}angular.module("utilities.exception").factory("exceptionService",t),t.$inject=["loggerService"]}(),function(){"use strict";function t(t,e){function i(i,n,r){e.error(i,r),t.error("Error: "+i,n)}function n(i,n,r){e.info(i,r),t.info("Info: "+i,n)}function r(i,n,r){e.success(i,r),t.info("Success: "+i,n)}function o(i,n,r){e.warning(i,r),t.warn("Warning: "+i,n)}var c={showToasts:!0,error:i,info:n,success:r,warning:o,log:t.log};return c}angular.module("utilities.logger").factory("loggerService",t),t.$inject=["$log","toastr"]}(),function(){"use strict";function t(t,e,i){function n(){c(),o(),r()}function r(){e.$on("$stateNotFound",function(t,e,n){if(!u){a.errors++,u=!0;var r="[State not found] Error routing to "+e.to+" from "+n.parent+"."+n.name+".";i.warning(r),s()}})}function o(){e.$on("$stateChangeSuccess",function(){a.changes++,u=!1})}function c(){e.$on("$stateChangeError",function(t,e,n,r,o,c){if(!u){a.errors++,u=!0;var l="[State Routing Error] Error routing to "+e+" from "+r+". Error: "+c;i.warning(l,[c]),s()}})}var u=!1,a={errors:0,changes:0},s=function(){t.go(t.$current)};return n(),{goDefaultState:s}}angular.module("utilities.router").factory("routerService",t),t.$inject=["$state","$rootScope","loggerService"]}(),function(){"use strict";function t(t,e,i){function n(n){function r(t){return t}return t.get(e.DROPINS+"/"+n).then(r).catch(i.catcher("XHR Failed for getActivitySessions"))}function r(){function n(t){return t}return t.get(e.DROPINS).then(n).catch(i.catcher("XHR Failed for getDropins"))}return{getDropins:r,getActivitySessions:n}}angular.module("app.data.schedule").factory("scheduleService",t),t.$inject=["apiService","API_ROUTES_CONFIG","exceptionService"]}(),function(){"use strict";function t(t,e){function i(){var i=e.getDropins();return t.all([i]).then(function(t){return{dropinActivities:t[0]}})}return{load:i}}angular.module("app.activities.widgets").factory("activitiesDataService",t),t.$inject=["$q","scheduleService"]}(),function(){"use strict";function t(){this.config={appErrorPrefix:void 0},this.configure=function(t){this.config.appErrorPrefix=t},this.$get=function(){return{config:this.config}}}function e(t){t.decorator("$exceptionHandler",i)}function i(t,e,i){return function(n,r){var o=e.config.appErrorPrefix||"",c={exception:n,cause:r};n.message=o+n.message,t(n,r),i.error(n.message,c)}}angular.module("utilities.exception").provider("exceptionHandler",t).config(e),e.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","loggerService"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb3JlL2NvcmUubW9kdWxlLmpzIiwicm91dGVzL2FwcC1yb3V0ZXMubW9kdWxlLmpzIiwidXRpbGl0aWVzL2FwaS9hcGkubW9kdWxlLmpzIiwidXRpbGl0aWVzL2V4Y2VwdGlvbi9leGNlcHRpb24ubW9kdWxlLmpzIiwidXRpbGl0aWVzL2xvZ2dlci9sb2dnZXIubW9kdWxlLmpzIiwidXRpbGl0aWVzL3JvdXRlci9yb3V0ZXIubW9kdWxlLmpzIiwiY29tcG9uZW50cy9zY2hlZHVsZS9kYXRhL3NjaGVkdWxlLm1vZHVsZS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUvcm91dGVzL3NjaGVkdWxlLXJvdXRlcy5tb2R1bGUuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlL3dpZGdldHMvYWN0aXZpdGllcy9hY3Rpdml0aWVzLm1vZHVsZS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUvd2lkZ2V0cy9hY3Rpdml0eS1zZXNzaW9ucy9hY3Rpdml0eXNlc3Npb25zLm1vZHVsZS5qcyIsImNvcmUvY29yZS5jb25maWcuanMiLCJyb3V0ZXMvYXBwLXJvdXRlcy5jb25maWcuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlL3JvdXRlcy9zY2hlZHVsZS1yb3V0ZXMuY29uZmlnLmpzIiwiY29yZS9jb3JlLmNvbnN0YW50LmpzIiwidXRpbGl0aWVzL2FwaS9hcGkuY29uc3RhbnQuanMiLCJ1dGlsaXRpZXMvYXBpL2FwaS5yb3V0ZXMuY29uc3RhbnQuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlL3JvdXRlcy9zY2hlZHVsZS1yb290LXJvdXRlLmNvbnN0YW50LmpzIiwibGF5b3V0L3NoZWxsLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlL3dpZGdldHMvYWN0aXZpdGllcy9hY3Rpdml0aWVzLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3NjaGVkdWxlL3dpZGdldHMvYWN0aXZpdHktc2Vzc2lvbnMvYWN0aXZpdHlzZXNzaW9ucy5jb250cm9sbGVyLmpzIiwidXRpbGl0aWVzL2FwaS9hcGkuZmFjdG9yeS5qcyIsInV0aWxpdGllcy9leGNlcHRpb24vZXhjZXB0aW9uLmZhY3RvcnkuanMiLCJ1dGlsaXRpZXMvbG9nZ2VyL2xvZ2dlci5mYWN0b3J5LmpzIiwidXRpbGl0aWVzL3JvdXRlci9yb3V0ZXIuZmFjdG9yeS5qcyIsImNvbXBvbmVudHMvc2NoZWR1bGUvZGF0YS9zY2hlZHVsZS5mYWN0b3J5LmpzIiwiY29tcG9uZW50cy9zY2hlZHVsZS93aWRnZXRzL2FjdGl2aXRpZXMvYWN0aXZpdGllcy5kYXRhLmZhY3RvcnkuanMiLCJ1dGlsaXRpZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbi1oYW5kbGVyLnByb3ZpZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFLQSxTQUFBLE9BQUEsWUFDQSxhQUNBLGdCQ1JBLFdBQ0EsWUFFQSxTQUFBLE9BQUEsWUFTQSxnQkFDQSxzQkFDQSxtQkFDQSx3QkNmQSxXQUNBLFlBS0EsU0FBQSxPQUFBLGNBQ0Esc0JBQ0Esd0JDUkEsV0FDQSxZQUVBLFNBQUEsT0FBQSx1QkNIQSxXQUNBLFlBRUEsU0FBQSxPQUFBLHVCQUVBLHdCQ0xBLFdBQ0EsWUFFQSxTQUFBLE9BQUEsMEJDSEEsV0FDQSxZQUVBLFNBQUEsT0FBQSxvQkFFQSxpQkNGQSxXQUNBLFlBRUEsU0FBQSxPQUFBLHFCQUNBLGdCQ1BBLFdBQ0EsWUFLQSxTQUFBLE9BQUEsdUJBQ0EsWUFDQSw4QkNSQSxXQUNBLFlBRUEsU0FBQSxPQUFBLDBCQUNBLHlCQ0pBLFdBQ0EsWUFFQSxTQUFBLE9BQUEscUNDSEEsV0FDQSxZQWlCQSxTQUFBLEdBQUEsR0FDQSxFQUFBLFFBQUEsUUFBQSxJQUNBLEVBQUEsUUFBQSxjQUFBLHFCQVFBLFFBQUEsR0FBQSxHQUNBLEVBQUEsY0FDQSxFQUFBLGNBQUEsR0FTQSxRQUFBLEdBQUEsR0FDQSxFQUFBLFVBQUEsa0JBUUEsUUFBQSxNQTFDQSxRQUNBLE9BQUEsWUFDQSxPQUFBLEdBQ0EsT0FBQSxHQUNBLE9BQUEsR0FDQSxJQUFBLHlIQ1hBLFdBQ0EsWUFnQkEsU0FBQSxHQUFBLEVBQUEsR0FHQSxFQUFBLE9BQUEsR0FFQSxFQUdBLE1BQUEsR0FuQkEsUUFDQSxPQUFBLGNBQ0EsT0FBQSx5RENSQSxXQUNBLFlBZ0JBLFNBQUEsR0FBQSxFQUFBLEdBcUJBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxPQW5CQSxHQUFBLEdBQUEsRUFBQSxJQUVBLEdBRUEsT0FDQSxLQUFBLGFBQ0EsT0FBQSxFQUNBLElBQUEsSUFDQSxZQUFBLGtFQUNBLFdBQUEsZUFDQSxhQUFBLEtBQ0EsU0FDQSxZQUFBLEtBS0EsRUFBQSxTQUFBLHlCQS9CQSxRQUNBLE9BQUEsdUJBQ0EsT0FBQSx5RENSQSxXQUNBLFlBRUEsU0FDQSxPQUFBLFlBQ0EsU0FBQSxTQUFBLFdDTEEsV0FDQSxZQUtBLFNBQUEsT0FBQSxpQkFDQSxTQUFBLGNBRUEsV0FBQSxXQ1RBLFdBQ0EsWUFLQSxTQUFBLE9BQUEsaUJBQ0EsU0FBQSxxQkFFQSxRQUFBLGVDVEEsV0FDQSxZQUtBLFNBQUEsT0FBQSx1QkFDQSxTQUFBLHVCQUVBLFlBQUEsRUFDQSxLQUFBLFdBQ0EsSUFBQSxZQUNBLFNBQUEsMkJDWkEsV0FDQSxnQkNEQSxXQUNBLFlBWUEsU0FBQSxHQUFBLEdBUUEsUUFBQSxLQUVBLEVBQUEsV0FBQSxFQUFBLGlCQVJBLEdBQUEsR0FBQSxJQUVBLEtBbUJBLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FBQSxhQWxDQSxRQUFBLE9BQUEsMEJBQ0EsV0FBQSxlQUFBLDZCQTJCQSxFQUFBLFNBQ0EsV0FBQSxvQ0NoQ0EsV0FDQSxZQWlCQSxTQUFBLEdBQUEsR0FHQSxRQUFBLEtBRUEsRUFBQSxpQkFBQSxpQkFHQSxJQXZCQSxRQUNBLE9BQUEsK0JBQ0EsV0FBQSxzQkFBQSxHQU1BLEVBQUEsU0FBQSxTQUFBLHVCQ1hBLFdBQ0EsWUFhQSxTQUFBLEdBQUEsRUFBQSxHQVlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsSUFDQSxNQUdBLEVBQUEsS0FBQSxFQUFBLFdBQUEsSUFBQSxFQUFBLEdBUUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxHQUFBLElBQUEsRUFBQSxXQUFBLElBQUEsR0FBQSxLQUNBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0ExQkEsT0FDQSxJQUFBLEVBQ0EsS0FBQSxHQWZBLFFBQ0EsT0FBQSxpQkFDQSxRQUFBLGFBQUEsdUNDTEEsV0FDQSxZQU9BLFNBQUEsR0FBQSxHQVlBLFFBQUEsR0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLElBYkEsR0FBQSxJQUNBLFFBQUEsRUFHQSxPQUFBLEdBVkEsUUFDQSxPQUFBLHVCQUNBLFFBQUEsbUJBQUEsa0NDTEEsV0FDQSxZQWVBLFNBQUEsR0FBQSxFQUFBLEdBb0JBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxVQUFBLEVBQUEsR0FTQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBU0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFlBQUEsRUFBQSxHQVNBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxZQUFBLEVBQUEsR0F0REEsR0FBQSxJQUNBLFlBQUEsRUFFQSxNQUFBLEVBQ0EsS0FBQSxFQUNBLFFBQUEsRUFDQSxRQUFBLEVBRUEsSUFBQSxFQUFBLElBR0EsT0FBQSxHQXRCQSxRQUNBLE9BQUEsb0JBQ0EsUUFBQSxnQkFBQSxrQ0NSQSxXQUNBLFlBT0EsU0FBQSxHQUFBLEVBQUEsRUFBQSxHQWlCQSxRQUFBLEtBQ0EsSUFDQSxJQUNBLElBR0EsUUFBQSxLQUNBLEVBQUEsSUFBQSxpQkFDQSxTQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxDQUdBLEVBQUEsU0FDQSxHQUFBLENBR0EsSUFBQSxHQUFBLHNDQUNBLEVBQUEsR0FBQSxTQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxHQUNBLEdBQUEsUUFBQSxHQUNBLE9BSUEsUUFBQSxLQUNBLEVBQUEsSUFBQSxzQkFDQSxXQUNBLEVBQUEsVUFDQSxHQUFBLElBSUEsUUFBQSxLQUNBLEVBQUEsSUFBQSxvQkFDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLElBQUEsRUFBQSxDQUdBLEVBQUEsU0FDQSxHQUFBLENBR0EsSUFBQSxHQUFBLDBDQUNBLEVBQUEsU0FBQSxFQUFBLFlBQ0EsQ0FDQSxHQUFBLFFBQUEsR0FBQSxJQUNBLE9BOURBLEdBQUEsSUFBQSxFQUNBLEdBQ0EsT0FBQSxFQUNBLFFBQUEsR0FHQSxFQUFBLFdBQ0EsRUFBQSxHQUFBLEVBQUEsVUFLQSxPQUZBLE1BR0EsZUFBQSxHQW5CQSxRQUNBLE9BQUEsb0JBQ0EsUUFBQSxnQkFBQSx3RENMQSxXQUNBLFlBY0EsU0FBQSxHQUFBLEVBQUEsRUFBQSxHQVlBLFFBQUEsR0FBQSxHQU1BLFFBQUEsR0FBQSxHQUNBLE1BQUEsR0FOQSxNQUFBLEdBQ0EsSUFBQSxFQUFBLFFBQUEsSUFBQSxHQUNBLEtBQUEsR0FDQSxNQUFBLEVBQUEsUUFBQSx1Q0FXQSxRQUFBLEtBTUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxHQU5BLE1BQUEsR0FDQSxJQUFBLEVBQUEsU0FDQSxLQUFBLEdBQ0EsTUFBQSxFQUFBLFFBQUEsOEJBN0JBLE9BQ0EsV0FBQSxFQUNBLG9CQUFBLEdBaEJBLFFBQ0EsT0FBQSxxQkFDQSxRQUFBLGtCQUFBLHNFQ0xBLFdBQ0EsWUFpQkEsU0FBQSxHQUFBLEVBQUEsR0FXQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsWUFFQSxPQUFBLEdBQUEsS0FBQSxJQUFBLEtBQ0EsU0FBQSxHQUNBLE9BQ0EsaUJBQUEsRUFBQSxNQWZBLE9BQ0EsS0FBQSxHQWRBLFFBQ0EsT0FBQSwwQkFDQSxRQUFBLHdCQUFBLHlDQ1BBLFdBQ0EsWUFXQSxTQUFBLEtBQ0EsS0FBQSxRQUNBLGVBQUEsUUFHQSxLQUFBLFVBQUEsU0FBQSxHQUNBLEtBQUEsT0FBQSxlQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsT0FBQSxPQUFBLEtBQUEsU0FXQSxRQUFBLEdBQUEsR0FDQSxFQUFBLFVBQUEsb0JBQUEsR0FVQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLGdCQUFBLEdBQ0EsR0FBQSxVQUFBLEVBQUEsTUFBQSxFQUNBLEdBQUEsUUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsR0FVQSxFQUFBLE1BQUEsRUFBQSxRQUFBLElBeERBLFFBQ0EsT0FBQSx1QkFDQSxTQUFBLG1CQUFBLEdBQ0EsT0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIEFwcGxpY2F0aW9uIE1vZHVsZVxyXG4gICAgICovXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLm1haW4nLCBbXHJcbiAgICAgICAgJ2FwcC5yb3V0ZXMnLFxyXG4gICAgICAgICdhcHAuY29yZSdcclxuICAgIF0pO1xyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb3JlJyxcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIEFuZ3VsYXIgbW9kdWxlc1xyXG4gICAgICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIE91ciByZXVzYWJsZSBjcm9zcyBhcHAgY29kZSBtb2R1bGVzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAndXRpbGl0aWVzLmFwaScsXHJcbiAgICAgICAgICAgICd1dGlsaXRpZXMuZXhjZXB0aW9uJyxcclxuICAgICAgICAgICAgJ3V0aWxpdGllcy5sb2dnZXInLFxyXG4gICAgICAgICAgICAndXRpbGl0aWVzLnJvdXRlcidcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogM3JkIFBhcnR5IG1vZHVsZXNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgXSk7XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWNhdGlvbiByb3V0ZXNcclxuICAgICAqL1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5yb3V0ZXMnLCBbXHJcbiAgICAgICAgJ2FwcC5zY2hlZHVsZS5yb3V0ZXMnLFxyXG4gICAgICAgICd1dGlsaXRpZXMucm91dGVyJ1xyXG4gICAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3V0aWxpdGllcy5hcGknLCBbXSk7XHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3V0aWxpdGllcy5leGNlcHRpb24nLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ3V0aWxpdGllcy5sb2dnZXInXHJcbiAgICAgICAgXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgndXRpbGl0aWVzLmxvZ2dlcicsXHJcbiAgICAgICAgW10pO1xyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3V0aWxpdGllcy5yb3V0ZXInLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ3VpLnJvdXRlcidcclxuICAgICAgICBdKTtcclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGF0YS5zY2hlZHVsZScsIFtcclxuICAgICAgICAnYXBwLmNvcmUnXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2NoZWR1bGUgUm91dGluZyBtb2R1bGVcclxuICAgICAqL1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5zY2hlZHVsZS5yb3V0ZXMnLCBbXHJcbiAgICAgICAgJ3VpLnJvdXRlcicsXHJcbiAgICAgICAgJ2FwcC5hY3Rpdml0aWVzLndpZGdldHMnXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmFjdGl2aXRpZXMud2lkZ2V0cycsIFtcclxuICAgICAgICAnYXBwLmRhdGEuc2NoZWR1bGUnXHJcbiAgICBdKTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAucGxhY2VzLmFjdGl2aXR5c2Vzc2lvbnMnLCBbXSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvcmUgbW9kdWxlIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAuY29uZmlnKHRvYXN0ckNvbmZpZylcclxuICAgICAgICAuY29uZmlnKGxvZ1Byb3ZpZGVyQ29uZmlnKVxyXG4gICAgICAgIC5jb25maWcoZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyQ29uZmlnKVxyXG4gICAgICAgIC5ydW4oaW5pdENvcmVDb21wb25lbnRzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvYXN0ciBDb25maWd1cmF0aW9uXHJcbiAgICAgKiBAcGFyYW0gdG9hc3RyXHJcbiAgICAgKiBAbmdJbmplY3RcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdG9hc3RyQ29uZmlnKHRvYXN0cikge1xyXG4gICAgICAgIHRvYXN0ci5vcHRpb25zLnRpbWVPdXQgPSA0MDAwO1xyXG4gICAgICAgIHRvYXN0ci5vcHRpb25zLnBvc2l0aW9uQ2xhc3MgPSAndG9hc3QtYm90dG9tLXJpZ2h0JztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBQcm92aWRlciBDb25maWd1cmF0aW9uXHJcbiAgICAgKiBAcGFyYW0gJGxvZ1Byb3ZpZGVyXHJcbiAgICAgKiBAbmdJbmplY3RcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbG9nUHJvdmlkZXJDb25maWcoJGxvZ1Byb3ZpZGVyKSB7XHJcbiAgICAgICAgaWYgKCRsb2dQcm92aWRlci5kZWJ1Z0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgJGxvZ1Byb3ZpZGVyLmRlYnVnRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGNlcHRpb24gSGFuZGxlciBQcm92aWRlciBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBAcGFyYW0gZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyXHJcbiAgICAgKiBAbmdJbmplY3RcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyQ29uZmlnKGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcikge1xyXG4gICAgICAgIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlci5jb25maWd1cmUoJ1tORy1KUCBFcnJvcl0gJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsemllIGNvcmUgY29tcG9uZW50c1xyXG4gICAgICogQHBhcmFtIHJvdXRlclNlcnZpY2VcclxuICAgICAqIEBuZ0luamVjdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpbml0Q29yZUNvbXBvbmVudHMocm91dGVyU2VydmljZSkge1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHAgcm91dGUgY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwLnJvdXRlcycpXHJcbiAgICAgICAgLmNvbmZpZyhyb3V0ZUNvbmZpZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVSS1Sb3V0ZXIgc3RhdGUgY29uZmlndXJhdGlvbi5cclxuICAgICAqIEZlYXR1cmUgcm9vdCAoYWJzdHJhY3QpIHJvdXRlcyBhcmUgYWxzbyBpbmNsdWRlZC5cclxuICAgICAqIEBwYXJhbSAkc3RhdGVQcm92aWRlclxyXG4gICAgICogQHBhcmFtIFNDSEVEVUxFX1JPT1RfUk9VVEUgTm90ZSB0aGF0IHRoaXMgaXMgcGFyZW50bGVzcy5cclxuICAgICAqIEBuZ0luamVjdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByb3V0ZUNvbmZpZygkc3RhdGVQcm92aWRlciwgU0NIRURVTEVfUk9PVF9ST1VURSlcclxuICAgIHtcclxuICAgICAgICAvLyBEZWZpbmUgUm9vdCBQYXJlbnRzXHJcbiAgICAgICAgU0NIRURVTEVfUk9PVF9ST1VURVsncGFyZW50J10gPSAnJztcclxuXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLy8gTG9jYWwgUm91dGVzXHJcbiAgICAgICAgICAgIC8vIEZlYXR1cmUgUm91dGVzXHJcbiAgICAgICAgICAgIC5zdGF0ZShTQ0hFRFVMRV9ST09UX1JPVVRFKTtcclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2hlZHVsZSByb3V0ZSBjb25maWd1cmF0aW9uXHJcbiAgICAgKi9cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuc2NoZWR1bGUucm91dGVzJylcclxuICAgICAgICAuY29uZmlnKHNjaGVkdWxlUm91dGVDb25maWcpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUm91dGUgY29uZmlndXJhdGlvbixcclxuICAgICAqIHVzZXMgU0NIRURVTEVfUk9PVF9ST1VURSBhcyBhYnN0cmFjdCBwYXJlbnQgc3RhdGVcclxuICAgICAqIEBwYXJhbSAkc3RhdGVQcm92aWRlclxyXG4gICAgICogQHBhcmFtIFNDSEVEVUxFX1JPT1RfUk9VVEVcclxuICAgICAqIEBuZ0luamVjdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJvdXRlQ29uZmlnKCRzdGF0ZVByb3ZpZGVyLCBTQ0hFRFVMRV9ST09UX1JPVVRFKVxyXG4gICAge1xyXG4gICAgICAgIC8vIFBhcmVudCBTdGF0ZSdzIG5hbWUgdG8gYmUgaW5jbHVkZWQgaW4gZXZlcnkgc3RhdGVcclxuICAgICAgICB2YXIgcGFyZW50ID0gU0NIRURVTEVfUk9PVF9ST1VURS5uYW1lO1xyXG5cclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAvLyBMb2NhbCByb3V0ZXNcclxuICAgICAgICAgICAgLnN0YXRlKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdhY3Rpdml0aWVzJyxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvY29tcG9uZW50cy9zY2hlZHVsZS93aWRnZXRzL2FjdGl2aXRpZXMvYWN0aXZpdGllcy50bXBsLmh0bWxcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiQWN0aXZpdHlDdHJsXCIsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6IFwidm1cIixcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2VydmljZTogYWN0aXZpdGllc0RhdGFTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBSb3V0ZSBSZXNvbHZlc1xyXG4gICAgICAgIGFjdGl2aXRpZXNEYXRhU2VydmljZS4kaW5qZWN0ID0gWydhY3Rpdml0aWVzRGF0YVNlcnZpY2UnXTtcclxuICAgICAgICBmdW5jdGlvbiBhY3Rpdml0aWVzRGF0YVNlcnZpY2UoYWN0aXZpdGllc0RhdGFTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpdml0aWVzRGF0YVNlcnZpY2UubG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5jb3JlJylcclxuICAgICAgICAuY29uc3RhbnQoJ3RvYXN0cicsIHRvYXN0cik7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFQSSAobm9uLXJvdXRlKSBjb25zdGFudHNcclxuICAgICAqL1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJ1dGlsaXRpZXMuYXBpXCIpXHJcbiAgICAgICAgLmNvbnN0YW50KCdBUElfQ09ORklHJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEJBU0VfUk9VVEU6ICdhcGknXHJcbiAgICAgICAgfSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQVBJIFJlc291cmNlcyBjb25zdGFudHNcclxuICAgICAqL1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJ1dGlsaXRpZXMuYXBpXCIpXHJcbiAgICAgICAgLmNvbnN0YW50KCdBUElfUk9VVEVTX0NPTkZJRycsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBEUk9QSU5TOiAnZHJvcGlucydcclxuICAgICAgICB9KTtcclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2NoZWR1bGUncyBhYnN0cmFjdCByb290IHJvdXRlXHJcbiAgICAgKi9cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLnNjaGVkdWxlLnJvdXRlc1wiKVxyXG4gICAgICAgIC5jb25zdGFudCgnU0NIRURVTEVfUk9PVF9ST1VURScsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgbmFtZTogJ3NjaGVkdWxlJyxcclxuICAgICAgICAgICAgdXJsOiAnL3NjaGVkdWxlJyxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiB1aS12aWV3PjwvZGl2PlwiXHJcbiAgICAgICAgfSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5hY3Rpdml0aWVzLndpZGdldHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBY3Rpdml0eUN0cmwnLCBBY3Rpdml0eUN0cmwpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWN0aXZpdHkgQ29udHJvbGxlclxyXG4gICAgICogQHBhcmFtICRzY29wZSAtIFNjb3BlXHJcbiAgICAgKiBAcGFyYW0gZGF0YVNlcnZpY2UgLSBkYXRhIHNlcnZpY2VcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICogQG5nSW5qZWN0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEFjdGl2aXR5Q3RybChkYXRhU2VydmljZSkge1xyXG5cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZtLmFjdGl2aXRpZXMgPSBkYXRhU2VydmljZS5kcm9waW5BY3Rpdml0aWVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3Rpdml0eSBDb250cm9sbGVyIGRlcGVuZGVuY2llc1xyXG4gICAgICovXHJcbiAgICBBY3Rpdml0eUN0cmwucmVzb2x2ZSA9IHtcclxuICAgICAgICBhY3Rpdml0aWVzOiBhY3Rpdml0aWVzXHJcbiAgICB9O1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gYWN0aXZpdGllcyhzY2hlZHVsZVNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gc2NoZWR1bGVTZXJ2aWNlLmdldERyb3BpbnMoKTtcclxuICAgIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAucGxhY2VzLmFjdGl2aXR5c2Vzc2lvbnMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdBY3Rpdml0eVNlc3Npb25DdHJsJywgQWN0aXZpdHlTZXNzaW9uQ3RybCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXBlbmRlbmN5IEluamVjdGlvblxyXG4gICAgICogQHR5cGUge3N0cmluZ1tdfVxyXG4gICAgICovXHJcbiAgICBBY3Rpdml0eVNlc3Npb25DdHJsLiRpbmplY3QgPSBbJyRzY29wZScsJ2FjdGl2aXR5U2Vzc2lvbnMnXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjdGl2aXR5IFNlc3Npb24gQ29udHJvbGxlclxyXG4gICAgICogQHBhcmFtICRzY29wZVxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEFjdGl2aXR5U2Vzc2lvbkN0cmwoJHNjb3BlKVxyXG4gICAge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICRzY29wZS5hY3Rpdml0eVNlc3Npb25zID0gYWN0aXZpdHlTZXNzaW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuICAgIH1cclxuXHJcblxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgndXRpbGl0aWVzLmFwaScpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2FwaVNlcnZpY2UnLCBhcGlGYWN0b3J5KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kICRodHRwIHRoYXQgYWN0cyBhcyB0aGUgZGF0YSBwcm92aWRlclxyXG4gICAgICogQHBhcmFtICRodHRwIC0gaHR0cCBjbGllbnRcclxuICAgICAqIEBwYXJhbSBBUElfQ09ORklHIC0gQVBJIGNvbnN0YW50c1xyXG4gICAgICogQHJldHVybnMge3tnZXQ6IGdldCwgcG9zdDogcG9zdH19IC0gZ2V0IGFuZCBwb3N0IHNlcnZpY2VzXHJcbiAgICAgKiBAbmdJbmplY3RcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBpRmFjdG9yeSgkaHR0cCwgQVBJX0NPTkZJRylcclxuICAgIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXQ6IGdldCxcclxuICAgICAgICAgICAgcG9zdDogcG9zdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRha2VzIGFueSBpbnB1dCBhbmQgY2FsbHMgYSBIVFRQIFBPU1Qgb24gdGhlIGdpdmVuIHJvdXRlXHJcbiAgICAgICAgICogQHBhcmFtIHJvdXRlIC0gUm91dGUgZm9yIHBvc3RpbmdcclxuICAgICAgICAgKiBAcGFyYW0gaW5wdXQgLSBQYXlsb2FkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcG9zdChyb3V0ZSwgaW5wdXQpIHtcclxuICAgICAgICAgICAgaWYgKCFpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGh0dHAucG9zdChBUElfQ09ORklHLkJBU0VfUk9VVEUgKyAnLycgKyByb3V0ZSwgaW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbHMgYSBIVFRQIEdFVCBvbiB0aGUgZ2l2ZW4gcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGUgLSBSb3V0ZSB0byBnZXRcclxuICAgICAgICAgKiBAcmV0dXJucyB7bmcuSVByb21pc2U8VFJlc3VsdD58Kn0gLSBQcm9taXNlIG9mIHJlc3VsdHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXQocm91dGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChBUElfQ09ORklHLkJBU0VfUk9VVEUgKyAnLycgKyByb3V0ZSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChwYXlsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCd1dGlsaXRpZXMuZXhjZXB0aW9uJylcclxuICAgICAgICAuZmFjdG9yeSgnZXhjZXB0aW9uU2VydmljZScsIGV4Y2VwdGlvbkZhY3RvcnkpO1xyXG5cclxuICAgIC8qIEBuZ0luamVjdCAqL1xyXG4gICAgZnVuY3Rpb24gZXhjZXB0aW9uRmFjdG9yeShsb2dnZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIGNhdGNoZXI6IGNhdGNoZXJcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2hlcyBleGNlcHRpb25zLCBsb2dzIHJlYXNvbiBpbnRvIGNvbnNvbGUuXHJcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2F0Y2hlcihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlclNlcnZpY2UuZXJyb3IobWVzc2FnZSwgcmVhc29uKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JhcHBlciBhcm91bmQgdG9hc3RyXHJcbiAgICAgKi9cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCd1dGlsaXRpZXMubG9nZ2VyJylcclxuICAgICAgICAuZmFjdG9yeSgnbG9nZ2VyU2VydmljZScsIGxvZ2dlckZhY3RvcnkpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVhbHMgd2l0aCByZXZlYWxpbmcgJiBsb2dnaW5nLlxyXG4gICAgICogQHJldHVybnMge1xyXG4gICAgICoge3Nob3dUb2FzdHM6IGJvb2xlYW4sIGVycm9yOiBlcnJvciwgaW5mbzogaW5mbywgc3VjY2Vzczogc3VjY2Vzcywgd2FybmluZzogd2FybmluZywgbG9nOiAoJGxvZy5sb2d8Kil9fVxyXG4gICAgICogQG5nSW5qZWN0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGxvZ2dlckZhY3RvcnkoJGxvZywgdG9hc3RyKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIHNob3dUb2FzdHM6IHRydWUsXHJcblxyXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgICAgIGluZm86IGluZm8sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICAgICAgICAgIHdhcm5pbmc6IHdhcm5pbmcsXHJcblxyXG4gICAgICAgICAgICBsb2c6ICRsb2cubG9nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZCBlcnJvciB0b2FzdCB3aXRoIGEgY3Jvc3NcclxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZVxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgICAgICogQHBhcmFtIHRpdGxlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSwgZGF0YSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgdG9hc3RyLmVycm9yKG1lc3NhZ2UsIHRpdGxlKTtcclxuICAgICAgICAgICAgJGxvZy5lcnJvcignRXJyb3I6ICcgKyBtZXNzYWdlLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExpZ2h0IGJsdWUgdG9hc3Qgd2l0aCBleGNsYW1hdGlvbiBtYXJrXHJcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqIEBwYXJhbSB0aXRsZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluZm8obWVzc2FnZSwgZGF0YSwgdGl0bGUpIHtcclxuICAgICAgICAgICAgdG9hc3RyLmluZm8obWVzc2FnZSwgdGl0bGUpO1xyXG4gICAgICAgICAgICAkbG9nLmluZm8oJ0luZm86ICcgKyBtZXNzYWdlLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdyZWVuIHRvYXN0IHdpdGggdGlja1xyXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGFcclxuICAgICAgICAgKiBAcGFyYW0gdGl0bGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKG1lc3NhZ2UsIGRhdGEsIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIHRpdGxlKTtcclxuICAgICAgICAgICAgJGxvZy5pbmZvKCdTdWNjZXNzOiAnICsgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWQgdG9hc3Qgd2l0aCBDcm9zc1xyXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGFcclxuICAgICAgICAgKiBAcGFyYW0gdGl0bGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UsIGRhdGEsIHRpdGxlKSB7XHJcbiAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKG1lc3NhZ2UsIHRpdGxlKTtcclxuICAgICAgICAgICAgJGxvZy53YXJuKCdXYXJuaW5nOiAnICsgbWVzc2FnZSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgndXRpbGl0aWVzLnJvdXRlcicpXHJcbiAgICAgICAgLmZhY3RvcnkoJ3JvdXRlclNlcnZpY2UnLCByb3V0ZXJTZXJ2aWNlKTtcclxuXHJcbiAgICAvKiBAbmdJbmplY3QgKi9cclxuICAgIGZ1bmN0aW9uIHJvdXRlclNlcnZpY2UoJHN0YXRlLCAkcm9vdFNjb3BlLCBsb2dnZXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIGhhbmRsaW5nUm91dGVDaGFuZ2VFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIHZhciByb3V0ZUNvdW50cyA9IHtcclxuICAgICAgICAgICAgZXJyb3JzOiAwLFxyXG4gICAgICAgICAgICBjaGFuZ2VzOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcm91dGVzID0gW107XHJcbiAgICAgICAgdmFyIGdvRGVmYXVsdFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc3RhdGUuZ28oJHN0YXRlLiRjdXJyZW50KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdvRGVmYXVsdFN0YXRlOiBnb0RlZmF1bHRTdGF0ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZVJvdXRlRXJyb3JzKCk7XHJcbiAgICAgICAgICAgIGhhbmRsZVJvdXRlU3VjY2Vzc2VzKCk7XHJcbiAgICAgICAgICAgIGhhbmRsZVJvdXRlTm90Rm91bmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJvdXRlTm90Rm91bmQoKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVOb3RGb3VuZCcsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQsIHVuZm91bmRTdGF0ZSwgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsaW5nUm91dGVDaGFuZ2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlQ291bnRzLmVycm9ycysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsaW5nUm91dGVDaGFuZ2VFcnJvciA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBTdGF0ZSBub3QgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gJ1tTdGF0ZSBub3QgZm91bmRdIEVycm9yIHJvdXRpbmcgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZm91bmRTdGF0ZS50byArICcgZnJvbSAnICsgZnJvbVN0YXRlLnBhcmVudCArICcuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TdGF0ZS5uYW1lICsgJy4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlclNlcnZpY2Uud2FybmluZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvRGVmYXVsdFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJvdXRlU3VjY2Vzc2VzKCkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVDb3VudHMuY2hhbmdlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsaW5nUm91dGVDaGFuZ2VFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVSb3V0ZUVycm9ycygpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxpbmdSb3V0ZUNoYW5nZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVDb3VudHMuZXJyb3JzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxpbmdSb3V0ZUNoYW5nZUVycm9yID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIFN0YXRlIHJvdXRpbmcgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gJ1tTdGF0ZSBSb3V0aW5nIEVycm9yXSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0Vycm9yIHJvdXRpbmcgdG8gJyArIHRvU3RhdGUgKyAnIGZyb20gJyArIGZyb21TdGF0ZSArICcuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgRXJyb3I6ICcgKyBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXJTZXJ2aWNlLndhcm5pbmcobXNnLCBbZXJyb3JdKTtcclxuICAgICAgICAgICAgICAgICAgICBnb0RlZmF1bHRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcC5kYXRhLnNjaGVkdWxlJylcclxuICAgICAgICAuZmFjdG9yeSgnc2NoZWR1bGVTZXJ2aWNlJywgc2NoZWR1bGVGYWN0b3J5KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGFjdGl2aXRpZXMgYW5kIHRoZWlyIGFjdGl2aXR5IHNlc3Npb25zXHJcbiAgICAgKiBAcGFyYW0gYXBpU2VydmljZVxyXG4gICAgICogQHBhcmFtIEFQSV9ST1VURVNfQ09ORklHXHJcbiAgICAgKiBAcGFyYW0gZXhjZXB0aW9uU2VydmljZVxyXG4gICAgICogQHJldHVybnMge3tnZXREcm9waW5zOiBnZXREcm9waW5zLCBnZXRBY3Rpdml0eVNlc3Npb25zOiBnZXRBY3Rpdml0eVNlc3Npb25zfX1cclxuICAgICAqIEBuZ0luamVjdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzY2hlZHVsZUZhY3RvcnkoYXBpU2VydmljZSwgQVBJX1JPVVRFU19DT05GSUcsIGV4Y2VwdGlvblNlcnZpY2UpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0RHJvcGluczogZ2V0RHJvcGlucyxcclxuICAgICAgICAgICAgZ2V0QWN0aXZpdHlTZXNzaW9uczogZ2V0QWN0aXZpdHlTZXNzaW9uc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyBhbGwgYWN0aXZpdHkgc2Vzc2lvbnMgZm9yIGEgZ2l2ZW4gYWN0aXZpdHlcclxuICAgICAgICAgKiBAcGFyYW0gYWN0aXZpdHlJZCAtIEFjdGl2aXR5IElkXHJcbiAgICAgICAgICogQHJldHVybnMge25nLklQcm9taXNlPFRSZXN1bHQ+fCp9IC0gUHJvbWlzZSBvZiBhY3Rpdml0eSBzZXNzaW9uc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFjdGl2aXR5U2Vzc2lvbnMoYWN0aXZpdHlJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmdldChBUElfUk9VVEVTX0NPTkZJRy5EUk9QSU5TICsgJy8nICsgYWN0aXZpdHlJZClcclxuICAgICAgICAgICAgICAgIC50aGVuKGdldEFjdGl2aXR5U2Vzc2lvbnNDb21wbGV0ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChleGNlcHRpb25TZXJ2aWNlLmNhdGNoZXIoJ1hIUiBGYWlsZWQgZm9yIGdldEFjdGl2aXR5U2Vzc2lvbnMnKSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRBY3Rpdml0eVNlc3Npb25zQ29tcGxldGUoYWN0aXZpdHlTZXNzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGl2aXR5U2Vzc2lvbnM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHJpZXZlcyBhbGwgZHJvcGluIGFjdGl2aXRpZXNcclxuICAgICAgICAgKiBAcmV0dXJucyB7bmcuSVByb21pc2U8VFJlc3VsdD58Kn0gLSBQcm9taXNlIG9mIGFjdGl2aXRpZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXREcm9waW5zKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpU2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmdldChBUElfUk9VVEVTX0NPTkZJRy5EUk9QSU5TKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RHJvcGluc0NvbXBsZXRlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGV4Y2VwdGlvblNlcnZpY2UuY2F0Y2hlcignWEhSIEZhaWxlZCBmb3IgZ2V0RHJvcGlucycpKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldERyb3BpbnNDb21wbGV0ZShhY3Rpdml0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZpdGllcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGF0YSBTZXJ2aWNlIG9iamVjdCB0byByZXRyaWV2ZSBkYXRhIGZvclxyXG4gICAgICogYWN0aXZpdGllcyBDb250cm9sbGVyXHJcbiAgICAgKi9cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAuYWN0aXZpdGllcy53aWRnZXRzJylcclxuICAgICAgICAgICAgLmZhY3RvcnkoJ2FjdGl2aXRpZXNEYXRhU2VydmljZScsIGFjdGl2aXRpZXNEYXRhRmFjdG9yeSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmb3IgYWN0aXZpdGllcyBDb250cm9sbGVyXHJcbiAgICAgKiBAcGFyYW0gJHFcclxuICAgICAqIEBwYXJhbSBzY2hlZHVsZVNlcnZpY2VcclxuICAgICAqIEByZXR1cm5zIHt7bG9hZDogbG9hZH19XHJcbiAgICAgKiBAbmdJbmplY3RcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWN0aXZpdGllc0RhdGFGYWN0b3J5KCRxLCBzY2hlZHVsZVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbG9hZDogbG9hZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJldHJpZXZlcyBhbGwgZGF0YSBhbmQgcmV0dXJucyBhbiBvYmplY3RcclxuICAgICAgICAvLyBFLmcuIHtcclxuICAgICAgICAvLyAgICAgICAgICBpdGVtMTogaXRlbTEsXHJcbiAgICAgICAgLy8gICAgICAgICAgaXRlbTI6IGl0ZW0yXHJcbiAgICAgICAgLy8gICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZCgpIHtcclxuICAgICAgICAgICAgdmFyIGRyb3BpbkFjdGl2aXRpZXMgPSBzY2hlZHVsZVNlcnZpY2UuZ2V0RHJvcGlucygpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChbZHJvcGluQWN0aXZpdGllc10pLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGRyb3BpbkFjdGl2aXRpZXM6IHJlc3VsdHNbMF1cclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIvLyBJbmNsdWRlIGluIGluZGV4Lmh0bWwgc28gdGhhdCBhcHAgbGV2ZWwgZXhjZXB0aW9ucyBhcmUgaGFuZGxlZC5cclxuLy8gU2hvdWxkIGV4Y2x1ZGUgZnJvbSB0ZXN0IHJ1bm5lclxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ3V0aWxpdGllcy5leGNlcHRpb24nKVxyXG4gICAgICAgIC5wcm92aWRlcignZXhjZXB0aW9uSGFuZGxlcicsIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcilcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdXN0IGNvbmZpZ3VyZSB0aGUgZXhjZXB0aW9uIGhhbmRsaW5nXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcigpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgICAgICAgYXBwRXJyb3JQcmVmaXg6IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29uZmlndXJlID0gZnVuY3Rpb24gKGFwcEVycm9yUHJlZml4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmFwcEVycm9yUHJlZml4ID0gYXBwRXJyb3JQcmVmaXg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7Y29uZmlnOiB0aGlzLmNvbmZpZ307XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZSBieSBzZXR0aW5nIGFuIG9wdGlvbmFsIHN0cmluZyB2YWx1ZSBmb3IgYXBwRXJyb3JQcmVmaXguXHJcbiAgICAgKiBBY2Nlc3NpYmxlIHZpYSBjb25maWcuYXBwRXJyb3JQcmVmaXggKHZpYSBjb25maWcgdmFsdWUpLlxyXG4gICAgICogQHBhcmFtICB7W3R5cGVdfSAkcHJvdmlkZVxyXG4gICAgICogQHJldHVybiB7W3R5cGVdfVxyXG4gICAgICogQG5nSW5qZWN0XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcHJvdmlkZSkge1xyXG4gICAgICAgICRwcm92aWRlLmRlY29yYXRvcignJGV4Y2VwdGlvbkhhbmRsZXInLCBleHRlbmRFeGNlcHRpb25IYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dGVuZCB0aGUgJGV4Y2VwdGlvbkhhbmRsZXIgc2VydmljZSB0byBhbHNvIGRpc3BsYXkgYSB0b2FzdC5cclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gJGRlbGVnYXRlXHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGV4Y2VwdGlvbkhhbmRsZXJcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbG9nZ2VyU2VydmljZVxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBkZWNvcmF0ZWQgJGV4Y2VwdGlvbkhhbmRsZXIgc2VydmljZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmRFeGNlcHRpb25IYW5kbGVyKCRkZWxlZ2F0ZSwgZXhjZXB0aW9uSGFuZGxlciwgbG9nZ2VyU2VydmljZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBFcnJvclByZWZpeCA9IGV4Y2VwdGlvbkhhbmRsZXIuY29uZmlnLmFwcEVycm9yUHJlZml4IHx8ICcnO1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JEYXRhID0ge2V4Y2VwdGlvbjogZXhjZXB0aW9uLCBjYXVzZTogY2F1c2V9O1xyXG4gICAgICAgICAgICBleGNlcHRpb24ubWVzc2FnZSA9IGFwcEVycm9yUHJlZml4ICsgZXhjZXB0aW9uLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRkZWxlZ2F0ZShleGNlcHRpb24sIGNhdXNlKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENvdWxkIGFkZCB0aGUgZXJyb3IgdG8gYSBzZXJ2aWNlJ3MgY29sbGVjdGlvbixcclxuICAgICAgICAgICAgICogYWRkIGVycm9ycyB0byAkcm9vdFNjb3BlLCBsb2cgZXJyb3JzIHRvIHJlbW90ZSB3ZWIgc2VydmVyLFxyXG4gICAgICAgICAgICAgKiBvciBsb2cgbG9jYWxseS4gT3IgdGhyb3cgaGFyZC5cclxuICAgICAgICAgICAgICogdGhyb3cgZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAgICAgICAgKiAgICAgdGhyb3cgeyBtZXNzYWdlOiAnZXJyb3IgbWVzc2FnZSB3ZSBhZGRlZCcgfTtcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGxvZ2dlclNlcnZpY2UuZXJyb3IoZXhjZXB0aW9uLm1lc3NhZ2UsIGVycm9yRGF0YSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=